{"version":3,"file":"js/418.84d522e5.js","mappings":"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","sources":["webpack://yy_shop/./src/views/ODataView.vue","webpack://yy_shop/./src/views/ODataView.vue?6b9c"],"sourcesContent":["<template>\r\n  <div>\r\n  <!-- <el-breadcrumb :separator-icon=\"ArrowRight\">\r\n    <el-breadcrumb-item>崇明区部门政务信息系统集成接入项目</el-breadcrumb-item>\r\n    <el-breadcrumb-item>日志预处理系统</el-breadcrumb-item>\r\n    <el-breadcrumb-item>日志源管理</el-breadcrumb-item>\r\n  </el-breadcrumb> -->\r\n  <div class=\"top\">\r\n    <el-button @click=\"addOdata\">添 加</el-button>\r\n  </div>\r\n  <el-table\r\n    :data=\"logList\"\r\n    style=\"width: 100%\"\r\n    :row-style=\"rowState\"\r\n    :header-cell-style=\"headerStyle\"\r\n    :cell-style=\"cellStyle\"\r\n  >\r\n    <el-table-column prop=\"yyfName\" label=\"名 称\" />\r\n    <el-table-column prop=\"yyfFacility\" label=\"源 名\" />\r\n    <el-table-column prop=\"yyfHost\" label=\"I P\" />\r\n    <el-table-column prop=\"yyfUrl\" label=\"U R L\" />\r\n    <el-table-column prop=\"yyfLinkman\" label=\"联 系 人\" />\r\n    <el-table-column prop=\"yyfPhone\" label=\"联 系 电 话\" />\r\n    <el-table-column label=\"操 作\">\r\n      <template #default=\"scope\">\r\n        <el-button\r\n          type=\"primary\"\r\n          :icon=\"Edit\"\r\n          size=\"large\"\r\n          @click=\"changeOdata(scope.row.yyfId)\"\r\n          title=\"修改\"\r\n        ></el-button>\r\n        <el-button\r\n          type=\"primary\"\r\n          :icon=\"Delete\"\r\n          size=\"large\"\r\n          @click=\"deleteOdata(scope.row.yyfId)\"\r\n          title=\"删除\"\r\n        ></el-button>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n\r\n  <!--  添加日志源-->\r\n  <el-dialog\r\n    title=\"添 加 日 志 源\"\r\n    :model-value=\"dialogVisibleAdd\"\r\n    :close-on-click-modal=\"false\"\r\n    width=\"50%\"\r\n    @close=\"closeAdd\"\r\n  >\r\n    <el-form\r\n      label-width=\"30%\"\r\n      :model=\"addForm\"\r\n      :rules=\"addRules\"\r\n      status-icon\r\n      ref=\"addRef\"\r\n    >\r\n      <el-form-item prop=\"yyfName\" label=\"名称:\">\r\n        <el-input v-model=\"addForm.yyfName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"yyfFacility\" label=\"源名称:\">\r\n        <el-select\r\n          v-model=\"addForm.yyfFacility\"\r\n          placeholder=\"选择源名称\"\r\n          clearable\r\n          @change=\"onameChange\"\r\n          @clear=\"onameClear\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in onameOpts\"\r\n            :key=\"item.value\"\r\n            :label=\"item.value\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item prop=\"yyfHost\" label=\"ip:\">\r\n        <el-select\r\n          v-model=\"addForm.yyfHost\"\r\n          placeholder=\"选择IP地址\"\r\n          clearable\r\n          :allow-create=\"true\"\r\n          :filterable=\"true\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in ipOpts\"\r\n            :key=\"item.value\"\r\n            :label=\"item.value\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item prop=\"yyfUrl\" label=\"URL:\">\r\n        <el-input v-model=\"addForm.yyfUrl\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"yyfLinkman\" label=\"联系人:\">\r\n        <el-input v-model=\"addForm.yyfLinkman\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"yyfPhone\" label=\"联系电话:\">\r\n        <el-input v-model=\"addForm.yyfPhone\"></el-input>\r\n      </el-form-item>\r\n      <div class=\"item_button\">\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisibleAdd = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"toAddOdata\">确 定</el-button>\r\n        </span>\r\n      </div>\r\n    </el-form>\r\n  </el-dialog>\r\n\r\n  <!--    修改日志源-->\r\n  <el-dialog\r\n    title=\"修 改 日 志 源\"\r\n    :model-value=\"dialogVisibleChange\"\r\n    :close-on-click-modal=\"false\"\r\n    width=\"50%\"\r\n    @close=\"closeChange\"\r\n  >\r\n    <el-form\r\n      label-width=\"30%\"\r\n      :model=\"changeForm\"\r\n      :rules=\"addRules\"\r\n      status-icon\r\n      ref=\"changeRef\"\r\n    >\r\n      <el-form-item prop=\"yyfName\" label=\"名称:\">\r\n        <el-input v-model=\"changeForm.yyfName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"yyfFacility\" label=\"源名称:\">\r\n        <el-select\r\n          v-model=\"changeForm.yyfFacility\"\r\n          placeholder=\"选择源名称\"\r\n          clearable\r\n          @change=\"onameChange\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in onameOpts\"\r\n            :key=\"item.value\"\r\n            :label=\"item.value\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item prop=\"yyfHost\" label=\"ip:\">\r\n        <el-select\r\n          v-model=\"changeForm.yyfHost\"\r\n          placeholder=\"选择IP地址\"\r\n          clearable\r\n        >\r\n          <el-option\r\n            v-for=\"item in ipOpts\"\r\n            :key=\"item.value\"\r\n            :label=\"item.value\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item prop=\"yyfUrl\" label=\"URL:\">\r\n        <el-input v-model=\"changeForm.yyfUrl\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"yyfLinkman\" label=\"联系人:\">\r\n        <el-input v-model=\"changeForm.yyfLinkman\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"yyfPhone\" label=\"联系电话:\">\r\n        <el-input v-model=\"changeForm.yyfPhone\"></el-input>\r\n      </el-form-item>\r\n      <div class=\"item_button\">\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisibleChange = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"toChangeOdata\">确 定</el-button>\r\n        </span>\r\n      </div>\r\n    </el-form>\r\n  </el-dialog>\r\n\r\n  <el-pagination\r\n    @current-change=\"handleCurrentChange\"\r\n    background\r\n    layout=\"prev, pager, next\"\r\n    :total=\"total\"\r\n    :current-page=\"queryInfo.currentPage\"\r\n    :page-size=\"queryInfo.pageSize\"\r\n    class=\"pagination-container\"\r\n  />\r\n</div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ArrowRight, Edit, Delete } from \"@element-plus/icons-vue\";\r\nimport { reactive, ref, getCurrentInstance, onMounted } from \"vue\";\r\nimport img from \"../assets/imgs/warning.png\";\r\n\r\nconst { proxy } = getCurrentInstance();\r\n// 日志源列表\r\nconst logList = reactive([]);\r\n// 分页器\r\nconst queryInfo = reactive({\r\n  currentPage: 1,\r\n  pageSize: 14,\r\n});\r\nconst total = ref(0);\r\n\r\n// 添加日志源\r\nlet orgList = reactive([]); // 接受后端的初始数据源\r\nconst addForm = reactive({\r\n  yyfName: \"\",\r\n  yyfFacility: \"\",\r\n  yyfHost: \"\",\r\n  yyfUrl: \"\",\r\n  yyfLinkman: \"\",\r\n  yyfPhone: \"\",\r\n});\r\nconst onameOpts = reactive([]); // 数据源初始数据\r\nconst ipOpts = reactive([]); // ip初始数据\r\nconst dialogVisibleAdd = ref(false);\r\nconst addRef = ref(\"\");\r\nconst addRules = reactive({\r\n  yyfName: [\r\n    { required: true, message: \"请输入自定义日志源名称\", trigger: \"blur\" },\r\n  ],\r\n  yyfFacility: [\r\n    // { required: true, message: '请选择日志源名称', trigger: 'blur' }\r\n  ],\r\n  yyfHost: [\r\n    { required: true, message: \"请选择日志源ip地址\", trigger: \"blur\" },\r\n    {\r\n      validator: (rule, value, callback) => {\r\n        if (\r\n          /^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/.test(\r\n            value\r\n          ) === false\r\n        ) {\r\n          callback(new Error(\"请输入正确的ip地址\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      },\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n  yyfUrl: [\r\n    { required: true, message: \"请输入url路径\", trigger: \"blur\" },\r\n    {\r\n      validator: (rule, value, callback) => {\r\n        if (\r\n          /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\*\\+,;=.]+$/.test(\r\n            value\r\n          ) === false\r\n        ) {\r\n          callback(new Error(\"请输入正确的url路径地址\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      },\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n  yyfLinkman: [\r\n    { required: true, message: \"请输入日志源管理人姓名\", trigger: \"blur\" },\r\n  ],\r\n  yyfPhone: [\r\n    { required: true, message: \"请输入日志源管理人电话\", trigger: \"blur\" },\r\n    {\r\n      validator: (rule, value, callback) => {\r\n        if (/^((0\\d{2,3}-\\d{7,8})|(1[3456789]\\d{9}))$/.test(value) === false) {\r\n          callback(\r\n            new Error(\"请输入正确的电话或手机号,固定电话号： 区号-电话号\")\r\n          );\r\n        } else {\r\n          callback();\r\n        }\r\n      },\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n});\r\n\r\n// 修改日志源\r\nconst dialogVisibleChange = ref(false);\r\nlet thisId = ref(0);\r\nconst changeForm = reactive({});\r\nconst changeRef = ref(\"\");\r\n\r\n// 表格头th样式\r\nconst headerStyle = () => {\r\n  return {\r\n    \"font-size\": \"0.18rem\",\r\n    color: \"black\",\r\n    \"text-align\": \"center\",\r\n    \"font-weight\": \"bolder\",\r\n    border: \"1px soild black\",\r\n  };\r\n};\r\n// 单元格td样式\r\nconst cellStyle = () => {\r\n  return {\r\n    \"text-align\": \"center\",\r\n    color: \"black\",\r\n    \"font-size\": \"0.15rem\",\r\n    height: \"0.6rem\",\r\n  };\r\n};\r\n// 行tr样式\r\nconst rowState = (row) => {\r\n  if (row.rowIndex % 2 !== 0)\r\n    return {\r\n      backgroundColor: \"#F5F5F5\",\r\n    };\r\n};\r\n\r\n// 根据分页器切换每页的日志源\r\nconst handleCurrentChange = (val) => {\r\n  queryInfo.currentPage = val;\r\n  getOdata();\r\n};\r\n\r\nonMounted(() => {\r\n  getOdata();\r\n});\r\n\r\n// 获取日志源\r\nconst getOdata = async () => {\r\n  const { data: res } = await proxy.$http.OdataService.getLog(queryInfo);\r\n  if (res.code !== 200) return proxy.$message(\"获取数据源列表失败\");\r\n  if (!res.data === false) {\r\n    total.value = res.data.total;\r\n    logList.length = 0;\r\n    for (let i = 0; i < res.data.records.length; i++) {\r\n      logList.push(res.data.records[i]);\r\n    }\r\n  }\r\n  \r\n};\r\n/* **********添加日志源********** */\r\nconst addOdata = async () => {\r\n  const { data: res } = await proxy.$http.OdataService.getOrginLog();\r\n  if (res.code !== 200) return proxy.$message(\"初始数据源获取失败\");\r\n  if (res.data.length !== 0) {\r\n    let middle = [];\r\n    orgList.length = 0;\r\n    for (let i = 0; i < res.data.length; i++) {\r\n      orgList.push(res.data[i]);\r\n      middle.push(res.data[i].yysFacility);\r\n    }\r\n    onameOpts.length = 0;\r\n    for (let i = 0; i < Array.from(new Set(middle)).length; i++) {\r\n      onameOpts.push({ value: Array.from(new Set(middle))[i] });\r\n    }\r\n  }\r\n  dialogVisibleAdd.value = true;\r\n};\r\n// 源初始数据改变时触发\r\nconst onameChange = (value) => {\r\n  ipOpts.length = 0;\r\n  if (orgList.length !== 0) {\r\n    for (let i = 0; i < orgList.length; i++) {\r\n      if (value === orgList[i].yysFacility)\r\n        ipOpts.push({ value: orgList[i].yysHost });\r\n    }\r\n  }\r\n};\r\n// 源初始数据清空时触发\r\nconst onameClear = () => {\r\n  ipOpts.length = 0;\r\n  addForm.yyfHost = \"\";\r\n};\r\nconst closeAdd = () => {\r\n  dialogVisibleAdd.value = false;\r\n};\r\nconst toAddOdata = () => {\r\n  console.log(addForm);\r\n  addRef.value.validate(async (valid) => {\r\n    if (!valid) return;\r\n    else {\r\n      const { data: res } = await proxy.$http.OdataService.addLog(addForm);\r\n      if (res.code !== 200) return proxy.$message.error(\"添加数据源失败\");\r\n      proxy.$message.success(\"添加数据源成功\");\r\n      getOdata();\r\n      dialogVisibleAdd.value = false;\r\n      addRef.value.resetFields();\r\n    }\r\n  });\r\n};\r\n\r\n/* **********修改日志源********** */\r\nconst changeOdata = async (id) => {\r\n  thisId.value = id;\r\n  const { data: resO } = await proxy.$http.OdataService.getOrginLog();\r\n  if (resO.code !== 200) return proxy.$message(\"初始数据源获取失败\");\r\n  if (resO.data.length !== 0) {\r\n    let middle = [];\r\n    orgList.length = 0;\r\n    for (let i = 0; i < resO.data.length; i++) {\r\n      orgList.push(resO.data[i]);\r\n      middle.push(resO.data[i].yysFacility);\r\n    }\r\n    onameOpts.length = 0;\r\n    for (let i = 0; i < Array.from(new Set(middle)).length; i++) {\r\n      onameOpts.push({ value: Array.from(new Set(middle))[i] });\r\n    }\r\n  }\r\n  const { data: res } = await proxy.$http.OdataService.getLogChange({\r\n    item: id,\r\n  });\r\n  console.log(res);\r\n  if (res.code !== 200) return proxy.$message.error(\"获取数据源数据失败\");\r\n  changeForm.yyfHost = res.data.yyfHost;\r\n  changeForm.yyfLinkman = res.data.yyfLinkman;\r\n  changeForm.yyfName = res.data.yyfName;\r\n  changeForm.yyfPhone = res.data.yyfPhone;\r\n  changeForm.yyfUrl = res.data.yyfUrl;\r\n  dialogVisibleChange.value = true;\r\n};\r\nconst closeChange = () => {\r\n  dialogVisibleChange.value = false;\r\n};\r\nconst toChangeOdata = () => {\r\n  const id = thisId.value;\r\n  changeRef.value.validate(async (valid) => {\r\n    if (!valid) return;\r\n    else {\r\n      const { data: res } = await proxy.$http.OdataService.changeLog({\r\n        ...changeForm,\r\n        id,\r\n      });\r\n      if (res.code !== 200) return proxy.$message.error(\"修改数据源失败\");\r\n      proxy.$message.success(\"修改数据源成功\");\r\n      getOdata();\r\n      dialogVisibleChange.value = false;\r\n    }\r\n  });\r\n};\r\n\r\nconst deleteOdata = (id) => {\r\n  proxy.$messageBox\r\n    .confirm(\r\n      '<img style=\"width: 0.25rem; margin-right: 0.1rem;\" src=' +\r\n        img +\r\n        '><div style=\"display: flex; justify-content: center\"><el-icon><Edit /> </el-icon><p>此操作将永远删除该数据源,是否继续？</p></div>',\r\n      \"删 除 数 据 源\",\r\n      {\r\n        confirmButtonText: \"确认删除\",\r\n        cancelButtonText: \"取消\",\r\n        cancelButtonClass: \"el-mes-btn\",\r\n        confirmButtonClass: \"el-mes-btn\",\r\n        dangerouslyUseHTMLString: true,\r\n      }\r\n    )\r\n    .then(async () => {\r\n      const { data: res } = await proxy.$http.OdataService.deleteLog({\r\n        item: id,\r\n      });\r\n      if (res.code !== 200) return proxy.$message.error(\"删除日志源失败\");\r\n      getOdata();\r\n      return proxy.$message.success(\"删除日志源成功\");\r\n    })\r\n    .catch(() => {\r\n      proxy.$message({\r\n        type: \"info\",\r\n        message: \"取消删除\",\r\n      });\r\n    });\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.top {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 50px;\r\n  box-sizing: border-box;\r\n  margin: 20px 0;\r\n\r\n  .el-button {\r\n    position: absolute;\r\n    right: 0.4rem;\r\n    background-color: rgb(18, 16, 29);\r\n    color: white;\r\n    font-size: 0.15rem;\r\n    height: 35px;\r\n    border: none;\r\n  }\r\n\r\n  .el-button:hover {\r\n    background-color: white;\r\n    color: rgb(18, 16, 29);\r\n    border: 1px solid black;\r\n  }\r\n}\r\n\r\n.el-table {\r\n  border: 1px solid grey;\r\n\r\n  .el-button {\r\n    background-color: rgba(255, 255, 255, 0);\r\n    color: black;\r\n    font-size: 0.3rem;\r\n    width: 0.3rem;\r\n    border: none;\r\n  }\r\n\r\n  .el-button:hover {\r\n    background-color: black;\r\n    color: white;\r\n  }\r\n}\r\n\r\n.el-form {\r\n  width: 80%;\r\n  margin: 0 auto;\r\n\r\n  :deep(.el-form-item__label) {\r\n    font-size: 0.16rem;\r\n    font-weight: bolder;\r\n    margin-right: 0.2rem;\r\n  }\r\n\r\n  .el-select {\r\n    width: 100%;\r\n  }\r\n\r\n  .el-input {\r\n    border-radius: 15px;\r\n    overflow: hidden;\r\n  }\r\n\r\n  :deep(.el-input__wrapper) {\r\n    border-radius: 15px;\r\n    border: none;\r\n  }\r\n\r\n  .item_button {\r\n    margin-top: 0.9rem;\r\n\r\n    .dialog-footer {\r\n      display: flex;\r\n      width: 100%;\r\n      justify-content: center;\r\n\r\n      .el-button {\r\n        background-color: rgb(18, 16, 29);\r\n        color: white;\r\n        font-size: 0.15rem;\r\n        height: 35px;\r\n        width: 1rem;\r\n        border: none;\r\n        box-sizing: border-box;\r\n        margin: 0 0.5rem;\r\n      }\r\n\r\n      .el-button:hover {\r\n        background-color: white;\r\n        color: rgb(18, 16, 29);\r\n        border: 1px solid black;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import script from \"./ODataView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ODataView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ODataView.vue?vue&type=style&index=0&id=5b93dc17&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\工作文件\\\\原版\\\\日志系统\\\\日志预处理系统node包完整版\\\\cmpretreatment\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5b93dc17\"]])\n\nexport default __exports__"],"names":["proxy","getCurrentInstance","logList","reactive","queryInfo","currentPage","pageSize","total","ref","orgList","addForm","yyfName","yyfFacility","yyfHost","yyfUrl","yyfLinkman","yyfPhone","onameOpts","ipOpts","dialogVisibleAdd","addRef","addRules","required","message","trigger","validator","rule","value","callback","test","Error","dialogVisibleChange","thisId","changeForm","changeRef","headerStyle","color","border","cellStyle","height","rowState","row","rowIndex","backgroundColor","handleCurrentChange","val","getOdata","onMounted","async","data","res","$http","OdataService","getLog","code","$message","length","i","records","push","addOdata","getOrginLog","middle","yysFacility","Array","from","Set","onameChange","yysHost","onameClear","closeAdd","toAddOdata","console","log","validate","valid","addLog","error","success","resetFields","changeOdata","id","resO","getLogChange","item","closeChange","toChangeOdata","changeLog","deleteOdata","$messageBox","confirm","img","confirmButtonText","cancelButtonText","cancelButtonClass","confirmButtonClass","dangerouslyUseHTMLString","then","deleteLog","catch","type","__exports__"],"sourceRoot":""}